/*!
 * CirebonWeb (https://cirebonweb.com)
 * Copyright (c) 2023 CirebonWeb
 * Licensed under MIT (https://opensource.org/licenses/MIT)
 */
const FetchHelper={postJson:async function(url,data=null,options={}){const finalOptions={onReload:!1,onError:!0,onSuccess:null,...options},fetchOptions={method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}};data&&(fetchOptions.body=JSON.stringify(data));let sensitiveErrorMessage="Kesalahan saat menerima respons dari server.";try{const response=await fetch(url,fetchOptions);let res=null;try{res=await response.json()}catch(jsonError){throw sensitiveErrorMessage=`Gagal memproses respons. Server mengembalikan format data yang tidak valid. Status: ${response.status}.`,new Error(sensitiveErrorMessage)}if(!response.ok||!res?.success)throw sensitiveErrorMessage=res?.messages||`Kegagalan server terdeteksi. Status HTTP: ${response.status}.`,new Error(sensitiveErrorMessage);return await Swal.fire("Berhasil",res.messages||"Aksi berhasil dilakukan.","success"),"function"==typeof Beranda?.refreshCsrf&&Beranda.refreshCsrf(),finalOptions.onReload&&location.reload(),"function"==typeof finalOptions.onSuccess&&finalOptions.onSuccess(res),res}catch(error){let displayMessage;displayMessage=finalOptions.onError?sensitiveErrorMessage.substring(0,500)+(sensitiveErrorMessage.length>500?"...":""):"Terjadi kesalahan saat memproses data.",Swal.fire("Error",displayMessage,"error")}},aksiKonfirmasi:function(selector,judul,html,icon,url,data=null,options={}){$(document).on("click",selector,(function(e){e.preventDefault(),Swal.fire({title:judul,html:html,icon:icon,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya",cancelButtonText:"Batal"}).then((result=>{result.isConfirmed&&FetchHelper.postJson(url,data,options)}))}))}};void 0===window.Beranda&&(window.Beranda=Beranda);